(function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},2468:function(t,e,i){},"274e":function(t,e,i){"use strict";var n=i("c5da"),a=i.n(n);a.a},"27bc":function(t,e,i){"use strict";var n=i("6e32"),a=i.n(n);a.a},"2ac6":function(t,e,i){},"3d9f":function(t,e,i){"use strict";var n=i("2ac6"),a=i.n(n);a.a},"46ef":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("0cdd");var n=i("2b0e"),a=i("5f5b"),r=i("b1e0");i("ab8b"),i("2dd8");n["default"].use(a["a"]),n["default"].use(r["a"]);i("4de4");n["default"].filter("upperCase",(function(t){return t.toUpperCase()})),n["default"].filter("limitSize",(function(t){return t.substr(0,10)}));i("7d05");var s,o,l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Navbar"),i("div",{staticClass:"content-div"},[i("router-view")],1)],1)},c=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[i("ul",[i("li",[i("router-link",{attrs:{to:"/"}},[i("a",[t._v("Home")])])],1),i("li",[i("router-link",{attrs:{to:"/diagram"}},[i("a",[t._v("Diagrama")])])],1)])])],1)},d=[],p={name:"Navbar"},h=p,f=(i("b4b7"),i("2877")),g=Object(f["a"])(h,u,d,!1,null,"9cdd4e60",null),m=g.exports,v={name:"App",components:{Navbar:m}},y=v,b=(i("5c0b"),Object(f["a"])(y,l,c,!1,null,null,null)),x=b.exports,k=i("8c4f"),w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h1",[t._v("Home")])])}],C={name:"Home",components:{},data:function(){return{actions:[]}}},L=C,D=(i("fc69"),Object(f["a"])(L,w,_,!1,null,"072d01a9",null)),S=D.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[t.onEdit?i("div",{staticClass:"main-display"},[i("Diagram",{on:{"edit-item":t.openEdit},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},[i("div",{staticClass:"diagram-menu"},[i("b-nav",{attrs:{pills:""}},[i("b-button",{staticClass:"btn btn-danger",on:{click:t.clear}},[t._v("Clear")]),i("b-button",{staticClass:"btn btn-info ml-2",on:{click:t.save}},[t._v("Save")])],1)],1)])],1):i("div",{staticClass:"main-grid"},[i("DiagramForm"),i("DiagramGrid",{on:{edit:t.editAction}})],1)])},O=[],j=(i("7db0"),i("4160"),i("b0c0"),i("159b"),i("5530")),M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"main-container"}},[i("div",{staticClass:"diagram-menu"},[i("b-nav",{staticClass:"p-1"},[i("b-list-group",[i("b-list-group-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Move diagram grid to init position (x = 0, y = 0)",expression:"\n            'Move diagram grid to init position (x = 0, y = 0)'\n          ",modifiers:{hover:!0,right:!0}}],staticClass:"sidebar-item",on:{click:t.trasnlateToInit}},[t._v(" Initial Position ")]),i("b-list-group-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Clear diagram grid",expression:"'Clear diagram grid'",modifiers:{hover:!0,right:!0}}],staticClass:"sidebar-item",on:{click:t.Clear}},[t._v(" Clear ")]),i("b-list-group-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Drop a action with input and output ports on diagram grid",expression:"\n            'Drop a action with input and output ports on diagram grid'\n          ",modifiers:{hover:!0,right:!0}}],staticClass:"sidebar-item-drag",attrs:{draggable:"true"},on:{dragend:function(e){return t.dropNew(e,0)}}},[t._v(" Two Ways ")]),i("b-list-group-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Drop a action with input, output and alterput ports on diagram grid",expression:"\n            'Drop a action with input, output and alterput ports on diagram grid'\n          ",modifiers:{hover:!0,right:!0}}],staticClass:"sidebar-item-drag",attrs:{draggable:"true"},on:{dragend:function(e){return t.dropNew(e,1)}}},[t._v(" Three Ways ")]),i("b-list-group-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Drop a action with oly a input port on diagram grid",expression:"\n            'Drop a action with oly a input port on diagram grid'\n          ",modifiers:{hover:!0,right:!0}}],staticClass:"sidebar-item-drag",attrs:{draggable:"true"},on:{dragend:function(e){return t.dropNew(e,2)}}},[t._v(" Single Way In ")]),i("b-list-group-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Drop a action with oly a output port on diagram grid",expression:"\n            'Drop a action with oly a output port on diagram grid'\n          ",modifiers:{hover:!0,right:!0}}],staticClass:"sidebar-item-drag",attrs:{draggable:"true"},on:{dragend:function(e){return t.dropNew(e,3)}}},[t._v(" Single Way Out ")])],1)],1)],1),i("div",{staticClass:"body-container"},[i("div",{staticClass:"body-center"},[t._t("default"),i("svg",{attrs:{id:"main-grid"},on:{mousedown:function(e){return e.preventDefault(),t.mouseDown(e)},mousemove:function(e){return e.preventDefault(),t.mouseMove(e)},mouseleave:function(e){return e.preventDefault(),t.unselect(e)},mouseup:function(e){return e.preventDefault(),t.unselect(e)},mousewheel:t.zoom}},[i("defs",[i("pattern",{attrs:{id:"smallGrid",width:"8",height:"8",patternUnits:"userSpaceOnUse"}},[i("path",{attrs:{d:"M 8 0 L 0 0 0 8",fill:"none",stroke:"gray","stroke-width":"0.5"}})]),i("pattern",{attrs:{id:"grid",width:"80",height:"80",patternUnits:"userSpaceOnUse"}},[i("rect",{attrs:{width:"80",height:"80",fill:"url(#smallGrid)"}}),i("path",{attrs:{d:"M 80 0 L 0 0 0 80",fill:"none",stroke:"gray","stroke-width":"1"}})])]),i("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}}),t._l(t.diagram.actions,(function(e){return i("DiagramCard",{key:e.name,attrs:{value:e,scale:t.scale,origin:t.svg,height:t.cardHeight,width:t.cardWidth},on:{move:function(e){return t.move(e)},select:function(e){return t.select(e)},remove:t.removeAction,edit:function(e){return t.$emit("edit-item",e)},clone:t.cloneAction,unselect:t.unselect,"click-port":t.setSelectedPort,"set-root":t.setRootAction,"edit-description":t.editActionDescription}})})),t._l(t.diagram.links,(function(e){return i("LinkLine",{key:e.id,attrs:{value:e,scale:t.scale,origin:t.svg},on:{"select-line":function(e){return t.setSelectedLine(e)}}})}))],2)],2),i("LigaturesMap",{attrs:{values:t.diagram.links},on:{"drop-item":function(e){return t.dropLink(e)},"in-ligature":function(e){return t.inLigature(e)},"out-ligature":function(e){return t.outLigature(e)}}})],1)])},A=[],I=(i("99af"),i("c740"),i("a434"),i("ac1f"),i("5319"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("foreignObject",{attrs:{x:t.cardParams().x,y:t.cardParams().y,width:t.cardParams().width,height:t.cardParams().height}},[i("div",{staticClass:"card",attrs:{draggable:"false"}},[i("div",{staticClass:"card-header",style:t.cardHeaderStyle(),attrs:{draggable:"false"},on:{mousedown:function(e){return e.preventDefault(),t.select(e)},mousemove:function(e){return t.$emit("move",e)},mouseup:function(e){return t.$emit("unselect")},mouseleave:function(e){return t.$emit("unselect")},dblclick:function(e){return t.$emit("edit-description",t.value)}}},[i("p",{style:t.styleP()},[t._v(" "+t._s(t._f("upperCase")(t.value.title))+" ")])]),i("div",{staticClass:"act-menu-region"},[i("ul",{staticClass:"act-menu-left",style:t.listLeftStyle()},[i("li",{staticClass:"list-item",style:t.listItemStyle()},[i("b-icon",{staticClass:"card-action",style:t.flagStyle(),attrs:{icon:t.flagIcon(),variant:"primary",scale:t.iconScale},on:{click:function(e){return t.$emit("set-root",t.value)}}})],1)]),i("ul",{staticClass:"act-menu-right",style:t.listRightStyle()},[i("li",{staticClass:"list-item",style:t.listItemStyle()},[i("b-icon",{staticClass:"card-action",attrs:{icon:"pencil",variant:"primary",scale:t.iconScale},on:{click:function(e){return t.$emit("edit",t.value)}}})],1),i("li",{staticClass:"list-item",style:t.listItemStyle()},[i("b-icon",{staticClass:"card-action",attrs:{icon:"subtract",variant:"secondary",scale:t.iconScale},on:{click:function(e){return t.$emit("clone",t.value)}}})],1),i("li",{staticClass:"list-item",style:t.listItemStyle()},[i("b-icon",{staticClass:"card-action",attrs:{icon:"trash",variant:"danger",scale:t.iconScale},on:{click:function(e){return t.$emit("remove",t.value)}}})],1)])]),i("div",{style:t.cardBodyStyle(),attrs:{draggable:"false"}},[t.value.input?i("div",{style:t.inputsStyle()},[i("div",{staticClass:"input"},[i("input",{staticClass:"link",style:t.inputStyle(),attrs:{type:"checkbox"},on:{click:function(e){e.preventDefault(),t.$emit("click-port",t.cardParams(),"input")}}}),i("h5",{style:t.styleH5()},[t._v(" "+t._s(t._f("upperCase")("I"))+" ")])])]):t._e(),t.value.alterput?i("div",{style:t.alterputsStyle()},[i("div",{staticClass:"alterput"},[i("input",{staticClass:"link",style:t.alterputStyle(),attrs:{type:"checkbox"},on:{click:function(e){e.preventDefault(),t.$emit("click-port",t.cardParams(),"alterput")}}}),i("h5",{style:t.styleH5()},[t._v(" "+t._s(t._f("upperCase")("A"))+" ")])])]):t._e(),t.value.output?i("div",{style:t.outputsStyle()},[i("div",{staticClass:"output"},[i("h5",{style:t.styleH5()},[t._v(" "+t._s(t._f("upperCase")("O"))+" ")]),i("input",{staticClass:"link",style:t.inputStyle(),attrs:{type:"checkbox"},on:{click:function(e){e.preventDefault(),t.$emit("click-port",t.cardParams(),"output")}}})])]):t._e()])])])}),$=[],R={name:"BasicCard",props:["width","height","value","scale","origin"],methods:{inputStyle:function(){return{width:13*this.scale+"px",height:13*this.scale+"px"}},alterputStyle:function(){return{width:13*this.scale+"px",height:13*this.scale+"px"}},styleH5:function(){return{margin:"0px","margin-left":5*this.scale+"px","margin-right":5*this.scale+"px","font-size":10*this.scale+"pt"}},styleP:function(){return{"font-size":10*this.scale+"pt",margin:"0px",color:"black","font-weight":600*this.scale,"font-family":"'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande','Lucida Sans Unicode', Geneva, Verdana, sans-serif"}},cardHeaderStyle:function(){return{"background-color":"rgb(255, 255, 255)",width:"100%",height:50*this.scale+"px",padding:"0px",display:"flex","flex-direction":"column","justify-content":"space-around","align-content":"center","border-bottom":"solid "+1*this.scale+"px rgb(46, 43, 43)","border-top":"solid "+1*this.scale+"px rgb(46, 43, 43)","border-top-left-radius":5*this.scale+"px","border-top-right-radius":5*this.scale+"px","border-left":"solid "+1*this.scale+"px rgb(46, 43, 43)","border-right":"solid "+1*this.scale+"px rgb(46, 43, 43)"}},cardBodyStyle:function(){return{backgroundColor:"#ffcc66",width:"100%",height:"100%",padding:"0px",display:"flex","flex-direction":"row","justify-content":"space-between","align-content":"center","border-bottom":1*this.scale+"px solid black","border-left":1*this.scale+"px solid black","border-right":1*this.scale+"px solid black"}},cardParams:function(){var t=this.value.x+this.origin.x,e=this.value.y+this.origin.y;return{ref:this.value,x:t*this.scale,y:e*this.scale,width:this.width*this.scale,height:this.height*this.scale,scale:"transform: scale("+this.scale+")"}},select:function(t){t.action=this.value,this.$emit("select",t)},clickPort:function(t,e,i){var n=t.target.getClientRects()[0].x-this.value.x,a=t.target.getClientRects()[0].y-this.value.y;n-=this.origin.x,a-=this.origin.y;var r={action:this.value,port:i,posRel:{x:n,y:a}};this.$emit("click-".concat(e),r)}}},E=R,N=Object(f["a"])(E,s,o,!1,null,null,null),H=N.exports,T={extends:H,name:"DiagramCard",computed:{type:function(){var t="three";return this.value.input&&this.value.output&&!this.value.alterput&&(t="two"),this.value.input||!this.value.output||this.value.alterput||(t="one-out"),!this.value.input||this.value.output||this.value.alterput||(t="one-in"),t},iconScale:function(){return 1.5*this.scale}},methods:{inputsStyle:function(){var t="three"===this.type?33.33:"two"===this.type?50:100;if(100==t&&this.value.output)return{};var e={"padding-left":10*this.scale+"px",display:"flex",width:t+"%","background-color":"transparent","flex-direction":"column","justify-content":"space-around"};return e},outputsStyle:function(){var t="three"===this.type?33.33:"two"===this.type?50:100,e={"padding-right":10*this.scale+"px",display:"flex",width:t+"%","flex-direction":"column","justify-content":"space-around","background-color":"transparent"};return e},alterputsStyle:function(){var t="three"===this.type?33.33:"two"===this.type?50:100;return{width:t+"%","padding-bottom":10*this.scale+"px",display:"flex","flex-direction":"column","justify-content":"space-around","background-color":"transparent"}},listItemStyle:function(){var t;return t=this.scale>.75?15*this.scale:this.scale>.5?7*this.scale:this.scale,{"margin-left":t+"px","margin-right":t+"px"}},listRightStyle:function(){var t=1*this.scale,e=30*this.scale;return{margin:"0px",height:e+"px","padding-left":"0px","padding-right":"0px","padding-top":t+"px","padding-bottom":t+"px","background-color":"white","border-right":t+"px solid black","border-bottom":t+"px solid black"}},listLeftStyle:function(){var t=1*this.scale,e=30*this.scale;return{margin:"0px",height:e+"px","padding-left":"0px","padding-right":"0px","padding-top":t+"px","padding-bottom":t+"px","background-color":"white","border-left":t+"px solid black","border-bottom":t+"px solid black"}},flagStyle:function(){return this.value.input||this.value.alterput?{display:"none"}:{display:"unset"}},flagIcon:function(){return this.value.isRoot?"flag-fill":"flag"}}},B=T,z=(i("274e"),Object(f["a"])(B,I,$,!1,null,"00723628",null)),G=z.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{staticClass:"line-group",attrs:{id:t.value.id}},[i("rect",{staticStyle:{fill:"black"},attrs:{id:t.value.id+"-1",x:t.getLine().input.x1-t.getLine().diff,y:t.getLine().input.y1-t.getLine().diff,width:t.getLine().width,height:t.getLine().height,rx:t.getLine().rx}}),i("line",{style:t.getLineStyle,attrs:{id:t.value.id+"-2",x1:t.getLine().input.x1,y1:t.getLine().input.y1,x2:t.getLine().input.x2,y2:t.getLine().input.y2}}),i("line",{style:t.getLineStyle,attrs:{id:t.value.id+"-3",x1:t.getLine().ligature.x1,y1:t.getLine().ligature.y1,x2:t.getLine().ligature.x2,y2:t.getLine().ligature.y2}}),i("line",{style:t.getLineStyle,attrs:{id:t.value.id+"-4",x1:t.getLine().output.x1,y1:t.getLine().output.y1,x2:t.getLine().output.x2,y2:t.getLine().output.y2}}),i("rect",{staticStyle:{fill:"black"},attrs:{id:t.value.id+"-5",x:t.getLine().output.x2-t.getLine().diff,y:t.getLine().output.y2-t.getLine().diff,width:t.getLine().width,height:t.getLine().height,rx:t.getLine().rx}})])},U=[],V={name:"LinkLine",props:["value","scale","origin"],computed:{getLineStyle:function(){var t="black";return this.value.onSelection&&(t="yellow"),"stroke:"+t+";stroke-width:"+2*this.scale}},methods:{getLine:function(){var t,e,i,n=this.value.input.ref,a=this.value.output?this.value.output.ref:this.value.alterput.ref,r=18,s=105,o=0,l=0;if(this.value.output){o=232,l=s;var c=0;i={x1:n.x+r,y1:n.y+s,x2:0,y2:n.y+s},t={x1:0,y1:a.y+l,x2:a.x+o,y2:a.y+l},c=(i.x1-t.x2)/2,i.x2=i.x1-c,t.x1=t.x2+c,e={x1:i.x2,y1:i.y2,x2:t.x1,y2:t.y1}}else{o=125,l=135;var u=0;i={x1:n.x+r,y1:n.y+s,x2:0,y2:n.y+s},t={x1:a.x+o,y1:0,x2:a.x+o,y2:a.y+l},u=i.x1-t.x2,i.x2=i.x1-u,t.y1=i.y1,e={x1:i.x2,y1:i.y2,x2:i.x2,y2:i.y2}}var d=6*this.scale;return i.x1=(i.x1+this.origin.x)*this.scale,i.x2=(i.x2+this.origin.x)*this.scale,i.y1=(i.y1+this.origin.y)*this.scale,i.y2=(i.y2+this.origin.y)*this.scale,t.x1=(t.x1+this.origin.x)*this.scale,t.x2=(t.x2+this.origin.x)*this.scale,t.y1=(t.y1+this.origin.y)*this.scale,t.y2=(t.y2+this.origin.y)*this.scale,e.x1=(e.x1+this.origin.x)*this.scale,e.x2=(e.x2+this.origin.x)*this.scale,e.y1=(e.y1+this.origin.y)*this.scale,e.y2=(e.y2+this.origin.y)*this.scale,{input:i,output:t,ligature:e,width:12*this.scale,height:12*this.scale,rx:1*this.scale,diff:d}}}},q=V,F=(i("7721"),Object(f["a"])(q,W,U,!1,null,"7eb0b6dc",null)),J=F.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-ligatures"},[t._m(0),t._l(t.values,(function(e){return i("b-list-group",{key:e.id,staticClass:"pl-2 pr-2"},[i("b-list-group-item",{staticClass:"list-item-custom",attrs:{variant:"success",draggable:"true"},on:{dragstart:function(e){return t.setRef(e)},dragend:function(i){return i.preventDefault(),t.checkDrop(i,e.id)},mouseenter:function(i){return t.$emit("in-ligature",e.id)},mouseleave:function(i){return t.$emit("out-ligature",e.id)},click:t.click}},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",value:"Drop out to delete link",expression:"'Drop out to delete link'",modifiers:{hover:!0,left:!0}}],staticClass:"group-list-link"},[i("p",{staticClass:"item-list-link"},[t._v(" "+t._s(t._f("limitSize")(t.getOutputDescription(e)))+" ")]),i("p",{staticClass:"arrow-icon-list"},[i("b-icon-arrow-right-square-fill",{attrs:{scale:"1.5",variant:"info"}})],1),i("p",{staticClass:"item-list-link"},[t._v(" "+t._s(t._f("limitSize")(e.input.ref.description))+" ")])])])],1)}))],2)},Q=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-2"},[i("h2",[t._v("Ligatures")])])}],X=(i("a4d3"),i("e01a"),i("d3b7"),i("ddb0"),{name:"LigaturesMap",props:["values"],data:function(){return{refToDropItem:0}},methods:{setRef:function(t){this.refToDropItem=t.x},click:function(){console.log(this.values)},checkDrop:function(t,e){t.x<this.refToDropItem-200&&this.$emit("drop-item",e)},getOutputDescription:function(t){return t.output?t.output.ref.description:t.alterput.ref.description}}}),Y=X,Z=(i("f58a"),Object(f["a"])(Y,K,Q,!1,null,"746c4f20",null)),tt=Z.exports,et=i("2ef0"),it=i.n(et),nt={name:"Diagram",props:["diagram"],components:{DiagramCard:G,LinkLine:J,LigaturesMap:tt},model:{prop:"diagram",event:"change"},data:function(){return{cardWidth:250,cardHeight:150,prevPos:null,onMove:null,stage:[],scale:1,prevPanPos:null,svg:{x:0,y:0},selectedLine:null,midleMouseBtnPress:!1}},methods:{Clear:function(){this.diagram.actions=[],this.diagram.links=[]},removeAction:function(t){var e=this.getActionIdByName(t.name);this.removeActionLinks(t),this.diagram.actions.splice(e,1)},removeActionLinks:function(t){var e=this;this.diagram.links.forEach((function(i){(i.input&&i.input.ref.name==t.name||i.output&&i.output.ref.name==t.name||i.alterput&&i.alterput.ref.name==t.name)&&e.dropLink(i.id)}))},cloneAction:function(t){var e=it.a.cloneDeep(t);e.name=e.name+"-copy",e.input&&(e.input={}),e.output&&(e.output={}),e.alterput&&(e.alterput={}),e.x=e.x+50,e.y=e.y+50,this.diagram.actions.push(e)},getActionIdByName:function(t){return this.diagram.actions.findIndex((function(e){return e.name==t}))},inLigature:function(t){this.changeColorLinkLine(t,"black","yellow")},outLigature:function(t){this.changeColorLinkLine(t,"yellow","black")},changeColorLinkLine:function(t,e,i){for(var n=1;n<=5;n++){var a=t+"-"+n,r=document.getElementById(a),s=r.getAttribute("style");s=s.replace(e,i),r.setAttribute("style",s)}},dropNew:function(t,e){var i=this.cardWidth/2,n=this.cardHeight/2;this.Add(t.x-i,t.y-n,e)},Add:function(t,e,i){var n={title:"nova ação",description:"Nova ação criada",name:this.findAvaliableName(),x:t,y:e};0===i&&(n.input={},n.output={},n.alterput=!1),1===i&&(n.input={},n.output={},n.alterput={}),2===i&&(n.input={},n.alterput=!1,n.output=!1),3===i&&(n.isRoot=this.checkRootAction(),n.output={},n.input=!1,n.alterput=!1),n.x=n.x>0?n.x:0,n.y=n.y>0?n.y:0,this.diagram.actions.push(n)},editActionDescription:function(t){console.log(t)},checkRootAction:function(){var t=!1;return this.diagram.actions.forEach((function(e){e.isRoot&&(t=!0)})),!t},setSelectedLine:function(t){this.selectedLine=t},dropLink:function(t){var e=this.diagram.links.findIndex((function(e){return e.id==t}));this.diagram.links.splice(e,1),this.stage=[]},findAvaliableName:function(){var t=1,e=0,i="";while(t>=0)i="new-action-"+e,t=this.diagram.actions.findIndex((function(t){return t.name===i})),e++;return i},select:function(t){0===t.button&&(this.onMove=t.action,this.onMove.select=!0,this.prevPos={x:t.x,y:t.y})},unselect:function(){this.onMove&&this.onMove.select&&(this.onMove.select=!1),this.onMove=null,this.onPan=!1},move:function(t){null!=this.onMove&&(this.moveAction(t),this.prevPos.x=t.x,this.prevPos.y=t.y)},moveAction:function(t){var e=1/this.scale,i=(t.x-this.prevPos.x)*e,n=(t.y-this.prevPos.y)*e;this.onMove.x+i<=0?this.onMove.x=0:this.onMove.x+=i,this.onMove.y+n<=0?this.onMove.y=0:this.onMove.y+=n},setSelectedPort:function(t,e){this.alreadyOnStage(t.name)&&(this.stage=[]),this.stage[e]=t,this.buildLink(this.stage)},alreadyOnStage:function(t){if(this.stage.forEach((function(t){return t.ref.name,!0})))return!1},setRootAction:function(t){this.diagram.actions.forEach((function(t){t.isRoot=!1})),t.isRoot=!0},buildLink:function(t){if(t){if(t&&t.input&&t.output&&t.input.ref.name===t.output.ref.name||t&&t.input&&t.alterput&&t.input.ref.name===t.alterput.ref.name)return void(this.stage=[]);if(t.input&&t.output&&!this.findLink(t,"O")){var e={id:this.getLinkId(),input:t.input,output:t.output};this.diagram.links.push(e),this.stage=[]}else if(t.input&&t.alterput&&!this.findLink(t,"A")){var i={id:this.getLinkId(),input:t.input,alterput:t.alterput};this.diagram.links.push(i),this.stage=[]}}},getLinkId:function(){return"link_"+(new Date).getTime()+"_"+this.diagram.links.length},findLink:function(t,e){var i=!1,n=-1;switch(e){case"A":n=this.diagram.links.findIndex((function(e){return e.input===t.input&&e.alterput===t.alterput})),i=this.diagram.links[n];break;case"O":n=this.diagram.links.findIndex((function(e){return e.input===t.input&&e.output===t.output})),i=this.diagram.links[n];break}return i||(i=!1),i},zoom:function(t){t.wheelDelta>.4&&this.scale<1?this.scale+=.1:t.wheelDelta<0&&this.scale>.4&&(this.scale-=.1)},mouseDown:function(t){this.panViewStart(t),1==t.button&&4==t.buttons&&this.tryMoveToInitialPanPosition()},tryMoveToInitialPanPosition:function(){var t=this;this.midleMouseBtnPress&&this.trasnlateToInit(),this.midleMouseBtnPress=!0,setTimeout((function(){t.midleMouseBtnPress=!1}),300)},panViewStart:function(t){1!==t.button&&4!==t.buttons||(this.onPan=!0,this.prevPanPos={x:t.x,y:t.y})},mouseMove:function(t){this.panViewMove(t)},panViewMove:function(t){if(this.onPan){var e=this.svg.x+t.x-this.prevPanPos.x,i=this.svg.y+t.y-this.prevPanPos.y;e<=0&&(this.svg.x=e,this.prevPanPos.x=t.x),i<=0&&(this.svg.y=i,this.prevPanPos.y=t.y)}},trasnlateToInit:function(){this.svg.x=0,this.svg.y=0}},computed:{getSvgPosition:function(){return"translate(".concat(this.svg.x,",").concat(this.svg.y,")")}}},at=nt,rt=(i("27bc"),Object(f["a"])(at,M,A,!1,null,"19be0146",null)),st=rt.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"crud-grid"},[i("b-table",{attrs:{items:t.diagrams,fields:t.fields,busy:t.isBusy,outlined:""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[i("div",{staticClass:"text-center text-danger my-2"},[i("b-spinner",{staticClass:"align-middle"}),i("strong",[t._v("Carregando...")])],1)]},proxy:!0},{key:"cell(is_active)",fn:function(e){return[i("b-icon",{staticClass:"act-icon",attrs:{icon:t.getIcon(e)},on:{click:function(i){return t.changeStatus(e)}}})]}},{key:"cell(opts)",fn:function(e){return[i("b-icon",{staticClass:"act-icon",attrs:{icon:"pencil"},on:{click:function(i){return t.editData(e)}}}),i("b-icon",{staticClass:"act-icon",attrs:{icon:"trash"},on:{click:function(i){return t.deleteDiagram(e)}}})]}}])})],1)},lt=[],ct=i("2f62"),ut={name:"DiagramGrid",data:function(){return{isBusy:!1,fields:[{key:"name",sortable:!0,label:"Nome"},{key:"description",sortable:!0,label:"Descrição"},{key:"is_active",label:"Status"},{key:"opts",label:"Ações"}]}},computed:Object(j["a"])({diagrams:{get:function(){return this.getDiagrams},set:function(t){this.setDiagrams(t)}}},Object(ct["b"])(["getDiagrams"])),methods:Object(j["a"])(Object(j["a"])({},Object(ct["c"])(["setDiagrams","changeStatus","deleteDiagram"])),{},{getIcon:function(t){return t.value?"check-circle":"x-circle"},editData:function(t){var e=this.diagrams.find((function(e){return e.id==t.item.id}));this.$emit("edit",e)}})},dt=ut,pt=(i("da87"),Object(f["a"])(dt,ot,lt,!1,null,"5ab9e7fe",null)),ht=pt.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"crud-form"},[i("h3"),t.show?i("b-form",{on:{submit:t.onSubmit}},[i("b-form-group",[i("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Nome"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("b-form-group",[i("b-form-input",{attrs:{id:"input-2",required:"",placeholder:"Descricao"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Salvar")]),i("b-button",{staticClass:"ml-2",attrs:{type:"reset",variant:"danger"}},[t._v("Limpar")])],1):t._e()],1)},gt=[],mt=i("b8ce"),vt=i.n(mt),yt={name:"DiagramForm",created:function(){this.loadDefaults()},data:function(){return{form:{id:null,name:"",description:"",is_active:!0,data:[]},show:!0}},methods:Object(j["a"])(Object(j["a"])({},Object(ct["c"])(["addDiagram"])),{},{onSubmit:function(t){t.preventDefault();var e=vt()(this.form);this.addDiagram(e),this.loadDefaults()},loadDefaults:function(){this.form={id:null,name:"",description:"",is_active:!0,data:[]}}})},bt=yt,xt=(i("3d9f"),Object(f["a"])(bt,ft,gt,!1,null,"503c8bb4",null)),kt=xt.exports,wt=i("0644"),_t=i.n(wt),Ct={name:"DiagramHome",components:{Diagram:st,DiagramGrid:ht,DiagramForm:kt},data:function(){return{onEdit:!1,diagemRef:{},data:{actions:[],links:[]}}},methods:Object(j["a"])(Object(j["a"])({},Object(ct["c"])(["saveDiagram"])),{},{openEdit:function(t){console.log(t)},editAction:function(t){this.diagemRef=_t()(t);var e=[],i=this.diagemRef.data;i.actions?e.actions=i.actions:e.actions=[],i.links?e.links=i.links:e.links=[],this.rebuildRefs(e),this.diagram=e,this.onEdit=!0},clear:function(){this.data.actions=[],this.data.links=[]},save:function(){var t=_t()(this.diagemRef);t.data=_t()(this.data),this.saveDiagram(t)},rebuildRefs:function(t){var e=this;t.links.forEach((function(i){i.input&&(i.input.ref=e.getReferenceAction(t,i.input.ref.name)),i.output&&(i.output.ref=e.getReferenceAction(t,i.output.ref.name)),i.alterput&&(i.alterput.ref=e.getReferenceAction(t,i.alterput.ref.name))}))},getReferenceAction:function(t,e){return t.actions.find((function(t){return t.name==e}))}})},Lt=Ct,Dt=(i("7d8a"),Object(f["a"])(Lt,P,O,!1,null,"3f2329be",null)),St=Dt.exports;n["default"].use(k["a"]);var Pt=[{path:"/",name:"Home",component:S},{path:"/diagram",name:"DiagramHome",component:St}],Ot=new k["a"]({mode:"history",base:"/",routes:Pt}),jt=Ot;n["default"].use(ct["a"]);var Mt=new ct["a"].Store({state:{diagrams:[]},getters:{getDiagrams:function(t){return t.diagrams}},mutations:{setDiagrams:function(t,e){t.diagrams=e},addDiagram:function(t,e){e.id=t.diagrams.length,t.diagrams.push(e)},changeStatus:function(t,e){var i=t.diagrams.find((function(t){return t.id==e.item.id}));i.is_active=!i.is_active},deleteDiagram:function(t,e){var i=t.diagrams.findIndex((function(t){return t.id==e.item.id}));t.diagrams.splice(i,1)},saveDiagram:function(t,e){var i=t.diagrams.findIndex((function(t){return t.id==e.id}));t.diagrams.splice(i,1),t.diagrams.push(e)}},actions:{},modules:{}});n["default"].config.productionTip=!1,new n["default"]({router:jt,store:Mt,render:function(t){return t(x)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),a=i.n(n);a.a},"6e32":function(t,e,i){},7721:function(t,e,i){"use strict";var n=i("46ef"),a=i.n(n);a.a},"7d05":function(t,e,i){},"7d8a":function(t,e,i){"use strict";var n=i("2468"),a=i.n(n);a.a},"84dd":function(t,e,i){},"9c0c":function(t,e,i){},a0d4:function(t,e,i){},b4b7:function(t,e,i){"use strict";var n=i("84dd"),a=i.n(n);a.a},c5da:function(t,e,i){},cd7c:function(t,e,i){},da87:function(t,e,i){"use strict";var n=i("e99d"),a=i.n(n);a.a},e99d:function(t,e,i){},f58a:function(t,e,i){"use strict";var n=i("cd7c"),a=i.n(n);a.a},fc69:function(t,e,i){"use strict";var n=i("a0d4"),a=i.n(n);a.a}});
//# sourceMappingURL=app.f456c2d6.js.map